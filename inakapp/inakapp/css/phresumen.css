/* ============================================================
   RESUMEN HORAS — Estilos modernos
   ============================================================ */

/* --- Popups & Paneles --- */
.popupwsmenu {
    color: #2c3e50;
}

#phr .cabeceraypie,
#phrdos .cabeceraypie,
#phrtres .cabeceraypie {
    background: #2563eb;
    border-color: #1d4ed8;
}

.popupwsmenu span {
    background-color: #2563eb;
    color: white;
    font-weight: 400;
}

.popupwsmenu #asignadoa span,
.popupwsmenu #visado span,
.popupwsmenu #calculoestructura span,
.popupwsmenu #proyectocompleto span,
.popupwsmenu #ccespecial span,
.popupwsmenu #otros span {
    background-color: white;
    color: #2563eb;
}

#phr .menu,
#phr .btncabecera,
#phrdos .menu,
#phrdos .btncabecera,
#phrtres .menu,
#phrtres .btncabecera {
    background: #2563eb;
    border-color: #1d4ed8;
}

#btnusuario {
    background-color: white;
    font-size: 0.6em;
}

/* --- Layout containers --- */
.ptcabeceradiv {
    float: left;
    width: 10%;
    height: 100px;
    display: block;
    overflow: hidden;
    background: #f0f4ff;
    font-size: 0.85em;
    padding: 10px;
    border-radius: 6px;
}

.ptcabeceradivdos {
    float: left;
    overflow-y: hidden;
    width: 30%;
    padding: 10px;
}

#ptcabecera {
    height: 100%;
    width: 100%;
    display: block;
    overflow-x: hidden;
}

.ptul {
    margin: 0;
    width: 10%;
}

/* ============================================================
   TABLA RESUMEN ANUAL (REEMPLAZADA POR KPI CARDS)
   ============================================================ */
/* Dashboard Grid Layout (Miller's Law & Aesthetic-Usability) */
.kpi-dashboard {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 20px;
    margin-bottom: 32px;
}

/* Base KPI Card (Glassmorphism sutil / Elevación) */
.kpi-card {
    background: #ffffff;
    border-radius: 12px;
    padding: 20px 24px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
    border: 1px solid #f1f5f9;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.kpi-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -2px rgba(0, 0, 0, 0.04);
}

.kpi-title {
    font-size: 0.85rem;
    font-weight: 600;
    color: #64748b;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 12px;
}

.kpi-value {
    font-size: 2.25rem;
    font-weight: 700;
    color: #0f172a;
    font-variant-numeric: tabular-nums;
    line-height: 1;
}

/* Variantes Semánticas (Von Restorff Effect) */
.kpi-primary {
    background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
    border: none;
    box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.3);
}

.kpi-primary .kpi-title {
    color: rgba(255, 255, 255, 0.8);
}

.kpi-primary .kpi-value {
    color: #ffffff;
}

.kpi-info {
    border-left: 4px solid #06b6d4;
}

.kpi-warning {
    border-left: 4px solid #f59e0b;
}

.kpi-link {
    background: rgba(37, 99, 235, 0.1);
    color: #2563eb;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.75rem;
    text-decoration: none;
    text-transform: none;
    font-weight: 600;
    transition: background 0.2s;
}

.kpi-link:hover {
    background: rgba(37, 99, 235, 0.2);
}

.dashboard-user-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: #1e293b;
    text-transform: uppercase;
    letter-spacing: 0.02em;
}

/* ============================================================
   TABLAS MENSUALES (grillas de días)
   ============================================================ */
#phresumenhorasmes {
    width: 99%;
    font-size: 12.5px;
    border-collapse: separate;
    border-spacing: 1px;
    background-color: #e2e8f0;
    border-radius: 8px;
    overflow: hidden;
    margin-bottom: 20px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

/* --- Cabeceras de mes --- */
.titulomes {
    font-size: 14px;
}

.titulomesnombre {
    font-size: 18px;
    font-weight: 700;
    letter-spacing: 0.03em;
}

/* --- Celdas de cabecera del mes (th) --- */
#phresumenhorasmes th {
    padding: 6px 4px;
    border: none;
    background-color: #2563eb;
    color: white;
    font-weight: 500;
    font-size: 12px;
    text-align: center;
}

/* --- Celdas de datos (td) --- */
#phresumenhorasmes td {
    border: none;
    background-color: #ffffff;
    color: #334155;
    text-align: right;
    padding: 5px 6px;
    font-size: 12px;
    font-variant-numeric: tabular-nums;
    transition: background-color 0.15s ease;
}

/* --- Filas de totales/contador (horas fichaje) --- */
#phresumenhorasmes .contador td {
    background-color: #dbeafe;
    color: #1e40af;
    font-weight: 600;
    border-top: 2px solid #93c5fd;
}

/* --- Filas de horas fuera de oficina --- */
#phresumenhorasmes .fuera td {
    background-color: #fef3c7;
    color: #92400e;
    font-weight: 500;
}

/* --- Filas de horas imputadas --- */
#phresumenhorasmes .imputadas td {
    background-color: #d1fae5;
    color: #065f46;
    font-weight: 600;
}

#phresumenhorasmes .imputadas {
    color: #065f46;
    background-color: #d1fae5;
}

/* --- Hover en filas para seguir datos horizontalmente --- */
#phresumenhorasmes tr:hover td {
    background-color: #f8fafc !important;
}

/* ============================================================
   PILLS (Badges para horas)
   ============================================================ */
.pill {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 600;
    min-width: 24px;
    text-align: center;
    background-color: #f1f5f9;
    color: #475569;
}

.pill-contador {
    background-color: #dbeafe;
    color: #1e40af;
}

.pill-fuera {
    background-color: #fef3c7;
    color: #92400e;
}

.pill-imputadas {
    background-color: #d1fae5;
    color: #065f46;
}

#phresumenhorasmes td {
    border: none;
    background-color: #ffffff;
    text-align: right;
    padding: 5px 6px;
    vertical-align: middle;
    transition: background-color 0.15s ease;
}

#phresumenhorasmes .contador:hover td {
    background-color: #bfdbfe !important;
}

#phresumenhorasmes .fuera:hover td {
    background-color: #fde68a !important;
}

#phresumenhorasmes .imputadas:hover td {
    background-color: #a7f3d0 !important;
}

/* --- HT / HR labels en cabecera de mes --- */
#phresumenhorasmes .teoricashoy {
    background-color: #1d4ed8;
    font-weight: 600;
}

#phresumenhorasmes .imputadas th {
    background-color: #059669;
    font-weight: 600;
}

/* --- Facturas (sin cambiar) --- */
#pttablefacturasrecibidas .filaimpar {
    padding: 3px;
    font-size: 0.75em;
    background-color: #f8fafc;
}

#pttablefacturasrecibidas .filapar {
    background-color: #eff6ff;
    padding: 3px;
    font-size: 0.75em;
}

#pttablefacturasrecibidas .textoizda {
    text-align: left;
}

#pttablefacturasrecibidas .visadorojo a {
    color: #FF0000;
    background-color: #FF0000;
}

.ptcabecerados {
    font-size: 0.8em;
}

/* ============================================================
   CLASES EXTRA para fines de semana y mejoras
   ============================================================ */

/* Fines de semana: columnas con fondo gris sutil */
#phresumenhorasmes .weekend td {
    background-color: #f1f5f9;
    color: #94a3b8;
}

#phresumenhorasmes .weekend th {
    background-color: #475569;
}

/* Scrollbar estilizado para la tabla */
#phrdiv {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

#phrdiv::-webkit-scrollbar {
    height: 8px;
}

#phrdiv::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 4px;
}

#phrdiv::-webkit-scrollbar-thumb {
    background: #94a3b8;
    border-radius: 4px;
}

#phrdiv::-webkit-scrollbar-thumb:hover {
    background: #64748b;
}

/* Leyenda visual sutil */
.leyenda-horas {
    display: flex;
    gap: 16px;
    padding: 8px 0;
    font-size: 12px;
    color: #64748b;
    margin-bottom: 8px;
}

.leyenda-horas span {
    display: flex;
    align-items: center;
    gap: 6px;
}

.leyenda-horas .dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    display: inline-block;
}

.leyenda-horas .dot-contador {
    background: #dbeafe;
}

.leyenda-horas .dot-fuera {
    background: #fef3c7;
}

.leyenda-horas .dot-imputadas {
    background: #d1fae5;
}

/* ============================================================
   PHRTRES - Legibilidad y jerarquia visual
   ============================================================ */
#phrtres {
    background: linear-gradient(180deg, #f2f6ff 0%, #f8fbff 44%, #ffffff 100%);
    --hours-cell-width: 27px;
    --hours-cell-height: 21px;
}

#phrtres .anchocontenidodesktop {
    padding: 20px clamp(12px, 2vw, 24px) 28px;
    max-width: 100%;
}

#phrtres .menu,
#phrtres .btncabecera {
    background: linear-gradient(90deg, #1e3a8a 0%, #2563eb 100%);
    border-color: #1e40af;
}

#phrtres .ui-header .ui-title {
    font-weight: 700;
    letter-spacing: 0.01em;
}

#phrtres .kpi-dashboard {
    gap: 12px;
    margin-bottom: 18px;
}

#phrtres .kpi-card {
    min-height: 102px;
    border: 1px solid #dbe6ff;
    border-radius: 12px;
    box-shadow: 0 6px 16px rgba(15, 23, 42, 0.06);
    padding: 14px 16px;
}

#phrtres .kpi-card.kpi-primary {
    background: linear-gradient(135deg, #173b95 0%, #2563eb 100%);
    box-shadow: 0 12px 22px rgba(30, 64, 175, 0.3);
}

#phrtres .kpi-title {
    font-size: 0.72rem;
    letter-spacing: 0.045em;
    margin-bottom: 10px;
    font-weight: 700;
}

#phrtres .kpi-title-with-action {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 10px;
}

#phrtres .kpi-value {
    font-size: clamp(1.6rem, 2.4vw, 2rem);
    line-height: 1.05;
    letter-spacing: -0.02em;
}

#phrtres .kpi-link {
    border: 1px solid #bfdbfe;
}

#phrtres .kpi-vac-hours {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 6px;
    margin-top: auto;
}

#phrtres .vac-hour-pill {
    border-radius: 9px;
    border: 1px solid #cfe0ff;
    background: #edf4ff;
    padding: 6px 8px;
    display: grid;
    gap: 2px;
}

#phrtres .vac-hour-pill span {
    font-size: 11px;
    font-weight: 700;
    color: #315181;
    letter-spacing: 0.01em;
}

#phrtres .vac-hour-pill strong {
    font-size: 15px;
    font-weight: 800;
    color: #11357d;
    line-height: 1;
}

#phrtres .vac-hour-pill.vac-hour-hr {
    background: #e8f8f3;
    border-color: #a7f3d0;
}

#phrtres .vac-hour-pill.vac-hour-hr strong {
    color: #065f46;
}

#phrtres .kpi-value-muted {
    display: none;
}

#phrtres .leyenda-horas {
    margin-top: 4px;
    margin-bottom: 10px;
}

#phrtres .dashboard-user-title {
    font-size: clamp(1.25rem, 2.3vw, 1.7rem);
    color: #0f172a;
}

#phrtres .leyenda-items {
    display: flex;
    gap: 10px 12px;
    flex-wrap: wrap;
}

#phrtres .leyenda-item {
    display: inline-flex;
    align-items: center;
    gap: 7px;
    background: #ffffff;
    border: 1px solid #e2e8f0;
    border-radius: 999px;
    padding: 6px 10px;
    color: #334155;
    font-size: 12px;
    font-weight: 600;
}

#phrtres .leyenda-item .dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    display: inline-block;
}

#phrtres .leyenda-item .dot-contador {
    background: #dbeafe;
}

#phrtres .leyenda-item .dot-fuera {
    background: #fef3c7;
}

#phrtres .leyenda-item .dot-imputadas {
    background: #d1fae5;
}

#phrtres #tablasmeses {
    display: grid;
    gap: 16px;
}

#phrtres .month-block {
    margin: 0;
    background: #ffffff;
    border: 1px solid #dbe2f2;
    border-radius: 14px;
    box-shadow: 0 8px 20px rgba(15, 23, 42, 0.06);
    overflow: hidden;
    animation: month-fade-in 0.32s ease both;
}

#phrtres .month-scroll {
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
}

#phrtres .month-scroll::-webkit-scrollbar {
    height: 10px;
}

#phrtres .month-scroll::-webkit-scrollbar-track {
    background: #e2e8f0;
}

#phrtres .month-scroll::-webkit-scrollbar-thumb {
    background: #94a3b8;
    border-radius: 999px;
}

#phrtres .phresumenhorasmes,
#phrtres #phresumenhorasmes {
    width: max-content;
    min-width: 100%;
    margin: 0;
    border-collapse: separate;
    border-spacing: 1px;
    background-color: #dbe4f4;
    border-radius: 0;
    box-shadow: none;
    table-layout: auto;
}

#phrtres .phresumenhorasmes th,
#phrtres #phresumenhorasmes th {
    box-sizing: border-box;
    border: none;
    background: #2454d0;
    color: #f8fbff;
    font-size: 10px;
    font-weight: 600;
    text-align: center;
    padding: 4px 3px;
    border-radius: 3px;
}

#phrtres .phresumenhorasmes .month-title,
#phrtres #phresumenhorasmes .month-title {
    background: linear-gradient(90deg, #1e3a8a 0%, #2563eb 100%);
    text-align: left;
    padding-left: 12px;
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 0;
    line-height: 1.05;
}

#phrtres .phresumenhorasmes th.teoricashoy,
#phrtres #phresumenhorasmes th.teoricashoy {
    background: #1d4ed8;
}

#phrtres .phresumenhorasmes th.imputadas,
#phrtres #phresumenhorasmes th.imputadas {
    background: #0f8a6a;
    color: #ecfdf5;
}

#phrtres .phresumenhorasmes th.weekend,
#phrtres #phresumenhorasmes th.weekend {
    background: #495b82;
    color: #eaf0ff;
}

#phrtres .phresumenhorasmes td,
#phrtres #phresumenhorasmes td {
    box-sizing: border-box;
    border: none;
    background-color: #ffffff;
    color: #1f2937;
    text-align: center;
    padding: 0 2px;
    font-size: 10px;
    line-height: 1;
    font-variant-numeric: tabular-nums;
    white-space: nowrap;
    border-radius: 3px;
}

#phrtres .phresumenhorasmes tr.row-esh>th,
#phrtres #phresumenhorasmes tr.row-esh>th,
#phrtres .phresumenhorasmes tr.row-values>td,
#phrtres #phresumenhorasmes tr.row-values>td,
#phrtres .phresumenhorasmes tr.contador>td,
#phrtres #phresumenhorasmes tr.contador>td,
#phrtres .phresumenhorasmes tr.fuera>td,
#phrtres #phresumenhorasmes tr.fuera>td,
#phrtres .phresumenhorasmes tr.imputadas>td,
#phrtres #phresumenhorasmes tr.imputadas>td {
    width: var(--hours-cell-width);
    min-width: var(--hours-cell-width);
    max-width: var(--hours-cell-width);
    height: var(--hours-cell-height);
    overflow: hidden;
    text-overflow: ellipsis;
}

#phrtres .phresumenhorasmes tr.row-days>th[colspan='3'],
#phrtres #phresumenhorasmes tr.row-days>th[colspan='3'] {
    min-width: calc(var(--hours-cell-width) * 3);
    height: var(--hours-cell-height);
}

#phrtres .phresumenhorasmes tr.row-days>th.summary-gap,
#phrtres #phresumenhorasmes tr.row-days>th.summary-gap,
#phrtres .phresumenhorasmes tr.row-esh>th.summary-gap,
#phrtres #phresumenhorasmes tr.row-esh>th.summary-gap {
    width: var(--hours-cell-width);
    min-width: var(--hours-cell-width);
    max-width: var(--hours-cell-width);
    height: var(--hours-cell-height);
    background: #2454d0 !important;
    color: #f8fbff !important;
}

#phrtres .phresumenhorasmes td.summary-gap,
#phrtres #phresumenhorasmes td.summary-gap {
    width: var(--hours-cell-width);
    min-width: var(--hours-cell-width);
    max-width: var(--hours-cell-width);
    height: var(--hours-cell-height);
    background: #cbd5e1 !important;
    color: transparent !important;
}

#phrtres .phresumenhorasmes tr.row-days>th.summary-gap,
#phrtres #phresumenhorasmes tr.row-days>th.summary-gap {
    padding: 0;
}

#phrtres .phresumenhorasmes tr.borrar:nth-child(odd) td,
#phrtres #phresumenhorasmes tr.borrar:nth-child(odd) td {
    background-color: #f8fbff;
}

#phrtres .phresumenhorasmes .contador td,
#phrtres #phresumenhorasmes .contador td {
    background-color: #dbeafe;
    color: #1d4ed8;
    font-weight: 700;
    border-top: 1px solid #93c5fd;
}

#phrtres .phresumenhorasmes .fuera td,
#phrtres #phresumenhorasmes .fuera td {
    background-color: #fef3c7;
    color: #92400e;
    font-weight: 600;
}

#phrtres .phresumenhorasmes .imputadas td,
#phrtres #phresumenhorasmes .imputadas td {
    background-color: #d1fae5;
    color: #065f46;
    font-weight: 700;
}

#phrtres .phresumenhorasmes tr.borrar:hover td,
#phrtres #phresumenhorasmes tr.borrar:hover td {
    background-color: #eef4ff !important;
}

#phrtres .phresumenhorasmes .contador:hover td,
#phrtres #phresumenhorasmes .contador:hover td {
    background-color: #bfdbfe !important;
}

#phrtres .phresumenhorasmes .fuera:hover td,
#phrtres #phresumenhorasmes .fuera:hover td {
    background-color: #fde68a !important;
}

#phrtres .phresumenhorasmes .imputadas:hover td,
#phrtres #phresumenhorasmes .imputadas:hover td {
    background-color: #a7f3d0 !important;
}

#phrtres .phresumenhorasmes tr:hover td.summary-gap,
#phrtres #phresumenhorasmes tr:hover td.summary-gap,
#phrtres .phresumenhorasmes .contador:hover td.summary-gap,
#phrtres #phresumenhorasmes .contador:hover td.summary-gap,
#phrtres .phresumenhorasmes .fuera:hover td.summary-gap,
#phrtres #phresumenhorasmes .fuera:hover td.summary-gap,
#phrtres .phresumenhorasmes .imputadas:hover td.summary-gap,
#phrtres #phresumenhorasmes .imputadas:hover td.summary-gap {
    background: #cbd5e1 !important;
}

#phrtres .pill {
    min-width: 20px;
    border-radius: 999px;
    font-size: 9.5px;
    font-weight: 700;
    padding: 1px 4px;
}

@keyframes month-fade-in {
    from {
        opacity: 0;
        transform: translateY(8px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@media (max-width: 1024px) {
    #phrtres {
        --hours-cell-width: 25px;
        --hours-cell-height: 20px;
    }

    #phrtres .kpi-dashboard {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
}

@media (max-width: 700px) {
    #phrtres {
        --hours-cell-width: 23px;
        --hours-cell-height: 18px;
    }

    #phrtres .anchocontenidodesktop {
        padding: 14px 10px 20px;
    }

    #phrtres .kpi-dashboard {
        grid-template-columns: 1fr;
        gap: 10px;
    }

    #phrtres .kpi-card {
        min-height: 96px;
    }
}

/* ============================================================
   PHRTRES - Calendar View
   ============================================================ */
#phrtres .calendar-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    flex-wrap: wrap;
    margin-bottom: 12px;
}

#phrtres .calendar-toolbar .leyenda-items {
    margin-left: auto;
    justify-content: flex-end;
}

#phrtres .calendar-view-switch {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    border: none;
    border-radius: 0;
    background: transparent;
    padding: 0;
    box-shadow: none;
    flex-shrink: 0;
}

#phrtres .calendar-switch-btn {
    appearance: none;
    border: 0;
    background: transparent;
    color: #3b4d71;
    font-size: 11px;
    font-weight: 700;
    padding: 6px 12px;
    min-height: 30px;
    line-height: 1.1;
    border-radius: 11px;
    white-space: nowrap;
    cursor: pointer;
}

#phrtres .calendar-switch-btn.is-active {
    background: linear-gradient(90deg, #244fbf 0%, #2f66e2 100%);
    color: #ffffff;
    box-shadow: none;
}

/* --- Layout calendario + panel lateral --- */
#phrtres .calendar-layout {
    display: flex;
    gap: 14px;
    align-items: flex-start;
}

#phrtres .calendar-layout>.calendar-months {
    flex: 1;
    min-width: 0;
}

#phrtres .calendar-layout>.day-detail-panel {
    width: 320px;
    flex-shrink: 0;
    position: sticky;
    top: 10px;
}

#phrtres .calendar-months {
    display: grid;
    gap: 14px;
    grid-template-columns: 1fr;
}

#phrtres .calendar-months.is-year-view {
    grid-template-columns: repeat(4, 1fr);
}

/* --- Vista año: celdas compactas --- */
#phrtres .is-year-view .calendar-day {
    min-height: auto;
    padding: 4px;
    align-items: center;
    justify-content: center;
    gap: 3px;
}

#phrtres .is-year-view .calendar-day.calendar-day-empty {
    min-height: auto;
    padding: 4px;
}

#phrtres .is-year-view .calendar-month-header {
    padding: 6px 10px;
    justify-content: center;
}

#phrtres .is-year-view .calendar-month-header h3 {
    font-size: 14px;
}

#phrtres .is-year-view .calendar-month-kpis {
    display: none;
}

#phrtres .is-year-view .calendar-weekday {
    font-size: 9px;
    padding: 4px 2px;
}

/* Dot indicador de estado */
#phrtres .calendar-day-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: #94a3b8;
}

#phrtres .calendar-day.has-data .calendar-day-dot {
    background: #3b82f6;
}

#phrtres .calendar-day.has-vacation .calendar-day-dot {
    background: #10b981;
}

#phrtres .calendar-day.has-baja .calendar-day-dot {
    background: #f59e0b;
}

#phrtres .calendar-month-card {
    border: 1px solid #d8e3fb;
    border-radius: 14px;
    overflow: hidden;
    background: #ffffff;
    box-shadow: 0 8px 18px rgba(15, 23, 42, 0.06);
}

#phrtres .calendar-month-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    background: linear-gradient(90deg, #1d3f9e 0%, #2d65df 100%);
    padding: 10px 12px;
    color: #eaf1ff;
}

#phrtres .calendar-month-header h3 {
    margin: 0;
    font-size: 20px;
    font-weight: 800;
    letter-spacing: 0.01em;
}

#phrtres .month-header-link {
    cursor: pointer;
    transition: opacity 0.15s;
}

#phrtres .month-header-link:hover {
    opacity: 0.75;
}

#phrtres .month-nav-btn {
    background: none;
    border: none;
    color: #eaf1ff;
    font-size: 28px;
    font-weight: 700;
    line-height: 1;
    cursor: pointer;
    padding: 0 6px;
    border-radius: 6px;
    transition: background 0.15s;
}

#phrtres .month-nav-btn:hover {
    background: rgba(255, 255, 255, 0.18);
}

#phrtres .calendar-month-card.is-current-month-view .calendar-month-header {
    justify-content: center;
    gap: 8px;
    padding-left: 12px;
    padding-right: 12px;
}

#phrtres .calendar-month-card.is-current-month-view .calendar-month-header h3 {
    width: auto;
    text-align: center;
}

#phrtres .calendar-month-kpis {
    display: flex;
    gap: 6px;
}

#phrtres .month-kpi {
    min-width: 84px;
    display: inline-flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    font-size: 11px;
    border-radius: 8px;
    padding: 4px 7px;
    background: rgba(255, 255, 255, 0.16);
    border: 1px solid rgba(255, 255, 255, 0.28);
}

#phrtres .month-kpi em {
    font-style: normal;
    font-weight: 700;
    opacity: 0.9;
}

#phrtres .month-kpi strong {
    font-size: 12px;
    font-weight: 800;
    color: #ffffff;
}

#phrtres .month-kpi.hr {
    background: rgba(3, 159, 117, 0.22);
    border-color: rgba(167, 243, 208, 0.55);
}

#phrtres .calendar-weekdays {
    display: grid;
    grid-template-columns: repeat(7, minmax(0, 1fr));
    gap: 8px;
    background: transparent;
    padding: 16px 16px 8px 16px;
}

#phrtres .calendar-weekday {
    text-align: center;
    font-size: 11px;
    font-weight: 800;
    color: #64748b;
    background: transparent;
    padding: 4px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

#phrtres .calendar-days {
    display: grid;
    grid-template-columns: repeat(7, minmax(0, 1fr));
    gap: 8px;
    background: #f8fafc;
    padding: 8px 16px 16px 16px;
    border-bottom-left-radius: 14px;
    border-bottom-right-radius: 14px;
}

#phrtres .calendar-day {
    min-height: 96px;
    background: #ffffff;
    border: 1px solid #e2e8f0;
    border-radius: 10px;
    text-align: left;
    padding: 10px;
    display: flex;
    flex-direction: column;
    gap: 4px;
    cursor: pointer;
    position: relative;
    box-shadow: 0 1px 2px rgba(15, 23, 42, 0.02);
    transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1), border-color 0.2s ease;
}

#phrtres .calendar-day:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 16px -4px rgba(15, 23, 42, 0.08);
    border-color: #cbd5e1;
    z-index: 2;
}

#phrtres .calendar-day.is-weekend {
    background: #fbfcfd;
    border-color: #f1f5f9;
}

#phrtres .calendar-day.is-today {
    border: 2px solid #3b82f6;
    background: #eff6ff;
}

#phrtres .calendar-day.has-vacation {
    border-color: #10b981;
}

#phrtres .calendar-day.has-baja {
    border-color: #f59e0b;
}

#phrtres .calendar-day-number {
    font-size: 13px;
    font-weight: 800;
    color: #0f172a;
    line-height: 1;
    margin-bottom: 2px;
}

#phrtres .calendar-day.is-weekend .calendar-day-number {
    color: #64748b;
}

#phrtres .calendar-day.is-today .calendar-day-number {
    color: #ffffff;
    background: #3b82f6;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    margin-top: -3px;
    margin-left: -3px;
}

#phrtres .calendar-day-lines {
    display: grid;
    gap: 2px;
    min-height: 34px;
}

#phrtres .calendar-day-lines span {
    font-size: 10px;
    color: #334155;
    line-height: 1.1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

#phrtres .calendar-day-lines .calendar-line-empty {
    color: #94a3b8;
}

#phrtres .calendar-day-fichajes {
    font-size: 11px;
    color: #64748b;
    font-weight: 600;
    margin-bottom: auto;
    /* Empuja las píldoras hacia abajo */
}

#phrtres .calendar-day-fichajes-empty {
    color: #cbd5e1;
    font-weight: 500;
}

#phrtres .calendar-day-metrics {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 4px;
    width: 100%;
}

#phrtres .calendar-day-metrics span {
    text-align: left;
    font-size: 10px;
    font-weight: 700;
    border-radius: 6px;
    padding: 3px 6px;
    line-height: 1.1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    width: 100%;
    box-sizing: border-box;
    display: flex;
    justify-content: space-between;
}

#phrtres .calendar-day-metrics .m-f {
    background: #eff6ff;
    color: #2563eb;
    border: 1px solid #dbeafe;
}

#phrtres .calendar-day-metrics .m-o {
    background: #fffbeb;
    color: #d97706;
    border: 1px solid #fef3c7;
}

#phrtres .calendar-day-metrics .m-i {
    background: #f0fdf4;
    color: #16a34a;
    border: 1px solid #dcfce7;
}

#phrtres .calendar-day-metrics .m-sin-imputar {
    background: #fef2f2;
    color: #dc2626;
    border: 1px solid #fee2e2;
    justify-content: center;
}

#phrtres .calendar-day.calendar-day-empty {
    min-height: 96px;
    background: transparent;
    cursor: default;
    border: 1px dashed #e2e8f0;
    box-shadow: none;
}

#phrtres .calendar-day.calendar-day-empty:hover {
    transform: none;
    box-shadow: none;
    border-color: #e2e8f0;
}

#phrtres .calendar-loading {
    border-radius: 12px;
    border: 1px dashed #b9caef;
    background: #f8fbff;
    color: #475569;
    padding: 18px;
    text-align: center;
    font-size: 14px;
    font-weight: 600;
}

#phrtres .day-detail-panel {
    margin-top: 0;
    border: 1px solid #f1f5f9;
    border-radius: 16px;
    background: #ffffff;
    box-shadow: 0 20px 25px -5px rgba(15, 23, 42, 0.05), 0 8px 10px -6px rgba(15, 23, 42, 0.01);
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

#phrtres .day-detail-panel.is-empty {
    opacity: 0.8;
}

#phrtres .day-detail-head {
    background: #ffffff;
    border-bottom: 1px solid #f1f5f9;
    padding: 24px 24px 16px;
}

#phrtres .day-detail-head h3 {
    margin: 0;
    font-size: 18px;
    color: #0f172a;
    font-weight: 800;
    letter-spacing: -0.01em;
}

#phrtres .day-detail-content {
    padding: 20px 24px 24px;
    color: #475569;
    font-size: 13px;
    background: #f8fafc;
    flex: 1;
}

#phrtres .day-detail-metrics {
    display: grid;
    grid-template-columns: 1fr;
    gap: 10px;
    margin-bottom: 20px;
}

#phrtres .detail-pill {
    border-radius: 12px;
    padding: 12px 16px;
    border: 1px solid #e2e8f0;
    background: #ffffff;
    display: flex;
    align-items: center;
    justify-content: space-between;
    box-shadow: 0 1px 2px rgba(15, 23, 42, 0.02);
}

#phrtres .detail-pill span {
    font-size: 12px;
    color: #64748b;
    font-weight: 600;
}

#phrtres .detail-pill strong {
    font-size: 16px;
    color: #0f172a;
    font-weight: 800;
    font-variant-numeric: tabular-nums;
}

#phrtres .day-detail-table-wrap {
    background: #ffffff;
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 1px 2px rgba(15, 23, 42, 0.02);
}

#phrtres .day-detail-table {
    width: 100%;
    border-collapse: collapse;
}

#phrtres .day-detail-table th,
#phrtres .day-detail-table td {
    font-size: 12px;
    padding: 10px 14px;
    text-align: left;
    border-bottom: 1px solid #f1f5f9;
}

#phrtres .day-detail-table th {
    background: #ffffff;
    color: #64748b;
    font-weight: 700;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    border-bottom: 2px solid #e2e8f0;
}

#phrtres .day-detail-table tbody tr:last-child td {
    border-bottom: 0;
}

#phrtres .day-detail-empty-text {
    border-radius: 12px;
    border: 1px dashed #cbd5e1;
    background: #ffffff;
    color: #64748b;
    text-align: center;
    padding: 24px;
    font-size: 13px;
    font-weight: 500;
}

@media (max-width: 980px) {
    #phrtres .calendar-month-header h3 {
        font-size: 17px;
    }

    #phrtres .month-kpi {
        min-width: 74px;
    }

    #phrtres .calendar-day {
        min-height: 76px;
        padding: 5px 5px;
    }

    #phrtres .calendar-day.calendar-day-empty {
        min-height: 76px;
    }

    #phrtres .calendar-months.is-year-view {
        grid-template-columns: repeat(3, 1fr);
    }
}

@media (max-width: 900px) {
    #phrtres .calendar-layout {
        flex-direction: column;
    }

    #phrtres .calendar-layout>.day-detail-panel {
        width: 100%;
        position: static;
    }
}

@media (max-width: 740px) {
    #phrtres .calendar-toolbar {
        gap: 10px;
    }

    #phrtres .calendar-toolbar .leyenda-items {
        width: 100%;
        margin-left: 0;
        justify-content: flex-start;
    }

    #phrtres .calendar-months.is-year-view {
        grid-template-columns: repeat(2, 1fr);
    }

    #phrtres .calendar-day {
        min-height: 70px;
        padding: 5px 4px;
    }

    #phrtres .calendar-day.calendar-day-empty {
        min-height: 70px;
    }

    #phrtres .calendar-day-lines span {
        font-size: 9px;
    }

    #phrtres .calendar-day-metrics span {
        font-size: 7.6px;
        padding: 2px 3px;
    }
}